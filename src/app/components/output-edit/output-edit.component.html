<div class="output-edit-container">
  <div class="header">
    <button class="back-button" (click)="back()">
      <img src="assets/icons/arrow-back.svg" width="24" height="24" alt="Back" />
    </button>
    <h2>Output configuration</h2>
  </div>

  <div class="output-edit-form">
    <div class="form-group">
      <label for="name">Output Id {{output.id}}
        <span *ngIf="output.slaveId != 0"> Slave Id {{output.slaveId}}</span></label>      
    </div>
    <div class="form-group">
      <label for="name">Имя выхода</label>
      <input type="text" id="name" [(ngModel)]="output.name" />
    </div>

    <div class="form-group">
      <label for="type">Тип выхода</label>
      <select id="type" [(ngModel)]="output.type" (ngModelChange)="onTypeChange()">
        <option *ngFor="let type of outputTypes" [value]="type.value">
          {{ type.label }}
        </option>
      </select>
    </div>

    <!-- Timer-specific fields -->
    <div class="form-group" *ngIf="output.type === 't'">
      <label for="on">On Time (seconds)</label>
      <div class="number-input-group">
        <button class="number-btn" (click)="decrementValue('on')">-</button>
        <input type="number" id="on" [(ngModel)]="output.on" min="0" />
        <button class="number-btn" (click)="incrementValue('on')">+</button>
      </div>
    </div>

    <div class="form-group" *ngIf="output.type === 't'">
      <label for="off">Off Time (seconds)</label>
      <div class="number-input-group">
        <button class="number-btn" (click)="decrementValue('off')">-</button>
        <input type="number" id="off" [(ngModel)]="output.off" min="0" />
        <button class="number-btn" (click)="incrementValue('off')">+</button>
      </div>
    </div>

    <!-- Standard output fields -->
    <div class="form-group" *ngIf="output.type === 's'">
      <label for="limit">Limit (seconds)</label>
      <div class="number-input-group">
        <button class="number-btn" (click)="decrementValue('limit')">-</button>
        <input type="number" id="limit" [(ngModel)]="output.limit" min="0" />
        <button class="number-btn" (click)="incrementValue('limit')">+</button>
      </div>
    </div>

    <div class="form-group">
      <label for="default">Значение при включении</label>
      <select id="default" [(ngModel)]="output.default">
        <option *ngFor="let value of defaultValues" [value]="value.value">
          {{ value.label }}
        </option>
      </select>
    </div>

    <div class="form-group inline">
      <label for="alice">Alice</label>
      <label class="switch">
        <input type="checkbox" id="alice" [(ngModel)]="output.alice" (ngModelChange)="onAliceChange()" />
        <span class="slider round"></span>
      </label>
    </div>

    <div class="form-group" *ngIf="output.alice">
      <label for="room">Room Name</label>
      <input type="text" id="room" [(ngModel)]="output.room" required />
      <div class="error-message" *ngIf="formError">{{ formError }}</div>
    </div>

    <div class="actions">      
      <button class="save-button" (click)="save()">Save</button>
    </div>
  </div>

</div>
